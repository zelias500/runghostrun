<ion-view view-title="Welcome, {{ user.email }}!">
  <ion-content class="padding">

    <div class="list card">
      <div class="item item-divider">
        <div id="recent-select" class="tmk-tab-select" ng-class="recentTab" ng-click="toggle(true)">Your Recent Ghosts</div>
        <div id="friend-select" class="tmk-tab-select" ng-class="friendTab" ng-click="toggle(false)">Friend Activity</div>
      </div>

      <div class="item item-body" ng-show="!!recentTab">
        <p ng-show="{{recentRuns.length === 0}}">You have no recent run data. Let's go for a run!</p>
        <ion-list>
          <ion-item ng-repeat='run in recentRuns'>
          <div ng-if="run.ghost.owner==user._id"> You ran your own challenge {{run.ghost.title}} on {{timeStampToReadable(run.timestamp)}}</div>
          <div ng-if="run.ghost.owner!=user._id"> You ran {{userName(run.ghost.owner)}}'s challenge {{run.ghost.title}} on {{timeStampToReadable(run.timestamp)}} </div>
            <ghost-map ghost='run' anchors='false' boxes='false'></ghost-map>
          And ran:
          <ghost-stats data='run'></ghost-stats>
          </ion-item>
        </ion-list>
      </div>

      <div class="item item-body" ng-show="!!friendTab">
        <p ng-show="{{friendRuns.length === 0}}">No recent friend activity. Go make friends!</p>
        <ion-list>
          <ion-item ng-repeat='friendRun in friendRuns'>
            <ghost-map ghost='friendRun' anchors='true'></ghost-map>
              <div ng-if="friendRun.ghost.owner==friendRun.runner._id"> {{userName(friendRun.owner)}} ran their own challenge {{run.ghost.title}} on {{timeStampToReadable(run.timestamp)}}</div>
              <div ng-if="friendRun.ghost.owner==user._id"> {{userName(friendRun.owner)}} ran your challenge {{run.ghost.title}} on {{timeStampToReadable(run.timestamp)}}</div>
              <div ng-if="friendRun.ghost.owner!=friendRun.runner._id && friendRun.ghost.owner!=user._id"> {{userName(friendRun.owner)}} ran {{run.ghost.owner}}'s challenge {{run.ghost.title}} on {{timeStampToReadable(run.timestamp)}} </div>
          </ion-item>
        </ion-list>
      </div>
      
    </div>
  </ion-content>
</ion-view>
